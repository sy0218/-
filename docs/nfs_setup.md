# π“‚ Ubuntuμ—μ„ NFS μ„λ²„ & ν΄λΌμ΄μ–ΈνΈ μ„¤μΉ λ° ν™κ²½ κµ¬μ¶•

---

## π“ κ°μ”
- Ubuntu ν™κ²½μ—μ„ **NFS(Network File System) μ„λ²„ λ° ν΄λΌμ΄μ–ΈνΈ μ„¤μΉμ™€ κ³µμ  λ””λ ‰ν† λ¦¬ κµ¬μ„±** κ°€μ΄λ“
- λ΅μ»¬ μ„¤μΉ κΈ°μ¤€μΌλ΅ μ‘μ„± (Ansible μ—†μ΄ μ§μ ‘ μ‹¤ν–‰)
- μ„λ²„-ν΄λΌμ΄μ–ΈνΈ κµ¬μ΅°μ—μ„ **λ””λ ‰ν† λ¦¬ κ³µμ  λ° μλ™ λ§μ΄νΈ μ„¤μ •** ν¬ν•¨
> π€ **Ansibleλ΅ μλ™ν™”λ ν™κ²½ μ„¤μ • μμ‹**λ” π”— [`Ansible λ ν¬μ§€ν† λ¦¬`](https://github.com/sy0218/Ansible-Multi-Server-Setup)μ—μ„ ν™•μΈν•μ„Έμ”!

>π’΅ **μ„¤λ…**: μ΄ κ°€μ΄λ“λ” μ„¤μΉ μμ„λ€λ΅ λ”°λΌ ν•λ©΄ λ°”λ΅ NFS κ³µμ λ¥Ό μ‚¬μ© κ°€λ¥ν•λ„λ΅ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤.

---
<br>

## β™οΈ NFS μ„λ²„ μ„¤μΉ
```bash
apt update
apt install -y nfs-kernel-server
```
>π’΅ **μ„¤λ…**: NFS μ„λ²„ ν¨ν‚¤μ§€λ¥Ό μ„¤μΉν•©λ‹λ‹¤. μ»¨νΈλ΅¤λ¬ μ—­ν• μ„ μν–‰ν•λ©° ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘κ·Όν•  κ³µμ  λ””λ ‰ν† λ¦¬λ¥Ό μ κ³µν•©λ‹λ‹¤.

---
<br>

## β™οΈ κ³µμ ν•  λ””λ ‰ν† λ¦¬ μƒμ„±
```bash
mkdir -p /nfs
chown nobody:nogroup /nfs
chmod 777 /nfs
```
>π’΅ **μ„¤λ…**: λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—μ„ μ½κΈ°/μ“°κΈ° κ°€λ¥ν•λ„λ΅ λ””λ ‰ν† λ¦¬ κ¶ν•μ„ μ„¤μ •ν•©λ‹λ‹¤. ν•„μ”μ‹ κ²½λ΅λ” λ³€κ²½ κ°€λ¥ν•λ©°, λ³΄μ• μ •μ±…μ— λ§μ¶° κ¶ν• μ΅°μ • κ°€λ¥.

---
<br>

## β™οΈ /etc/exports μ„¤μ •
```bash
vi /etc/exports

/nfs 192.168.122.0/24(rw,sync,no_subtree_check)
```
>π’΅ **μ„¤λ…** π‘‡
- 192.168.122.0/24 β†’ NFS μ ‘κ·Ό ν—μ© ν΄λΌμ΄μ–ΈνΈ λ„¤νΈμ›ν¬
- rw β†’ μ½κΈ°/μ“°κΈ° ν—μ©
- sync β†’ μ“°κΈ° μ”μ²­μ„ λ™κΈ°ν™”
- no_subtree_check β†’ ν•μ„ λ””λ ‰ν† λ¦¬ κ²€μ‚¬ λΉ„ν™μ„±ν™”

---
<br>

## β™οΈ μ„¤μ • μ μ© λ° μ„λΉ„μ¤ ν™μ„±ν™”
```bash
exportfs -a
systemctl restart nfs-kernel-server
systemctl enable nfs-kernel-server
```
>π’΅ **μ„¤λ…**: μ„¤μ •μ„ μ‹μ¤ν…μ— μ μ©ν•κ³ , NFS μ„λ²„λ¥Ό μ¬μ‹μ‘ ν›„ λ¶€ν… μ‹ μλ™ μ‹μ‘λλ„λ΅ ν™μ„±ν™”ν•©λ‹λ‹¤.

---
<br>

## β™οΈ NFS ν΄λΌμ΄μ–ΈνΈ μ„¤μΉ
```bash
apt update
apt install -y nfs-common
```
>π’΅ **μ„¤λ…**: ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ NFS μ„λ²„ κ³µμ  λ””λ ‰ν† λ¦¬λ¥Ό λ§μ΄νΈν•κΈ° μ„ν•΄ μ„¤μΉν•©λ‹λ‹¤.

---
<br>

## β™οΈ λ§μ΄νΈν•  λ””λ ‰ν† λ¦¬ μƒμ„±
```bash
mkdir -p /nfs
```
>π’΅ **μ„¤λ…**: μ„λ²„ κ³µμ  λ””λ ‰ν† λ¦¬λ¥Ό λ§μ΄νΈν•  λ΅μ»¬ κ²½λ΅λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

---
<br>

## β™οΈ NFS μ„λ²„ λ§μ΄νΈ & μλ™ λ§μ΄νΈ μ„¤μ •
```bash
# μλ™ λ§μ΄νΈ
mount -t nfs -o defaults,rw,nfsvers=4,noatime 192.168.122.59:/nfs /nfs

# μλ™ λ§μ΄νΈ
vi /etc/fstab
192.168.122.59:/nfs /nfs nfs defaults,rw,nfsvers=4,noatime 0 0
```
>π’΅ **μ„¤λ…**: μ„λ²„ κ³µμ  λ””λ ‰ν† λ¦¬λ¥Ό λ§μ΄νΈν•  λ΅μ»¬ κ²½λ΅λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

---
<br>

## β… κ²°κ³Ό ν™•μΈ
```bash
# λ§μ΄νΈ ν™•μΈ
df -h | grep nfs
β†’ 192.168.122.59:/nfs   35G   17G   16G   52% /nfs

# νμΌ ν™•μΈ
cat /nfs/test.txt
β†’ μ•λ…• λ‚λ” 192.168.122.59λ² μ„λ²„ μ• ν”λ¦¬μΌ€μ΄μ… μ„λ²„μ•Ό~
```
- ν΄λΌμ΄μ–ΈνΈμ—μ„ κ³µμ  λ””λ ‰ν† λ¦¬ μ ‘κ·Ό λ° μ½κΈ°/μ“°κΈ° ν…μ¤νΈ μ„±κ³µ μ‹ NFS ν™κ²½ κµ¬μ¶• μ™„λ£
---
